<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=9" />
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta name="description" content="Timeline of elections and dissolutions of parliaments in G7 countries after WW II.">
		<meta property="og:image" content="https://kaz-ogiwara.github.io/assets/img/thumbnail-dissolution.png">
		<title>Elections and Dissolutions in The G7</title>
		<link rel="stylesheet" href="../../assets/css/default.css" />
		<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
		<script src="../../assets/js/default.js"></script>
		<style>
			body {
				/* Thanks to: https://www.toptal.com/designers/subtlepatterns/white-wall-3/ */
				background-image: url('img/white_wall_hash.png');
			}

			#container {
				margin: 0 auto;
				width: 90%;
				max-width: 800px;
			}
			
			#container * {
				color: rgba(0,0,0,0.7);
				transition: all 0.15s;
			}
			
			#title-block *,
			#content-block *,
			#footer-block * {
				font-family: 'Helvetica Neue';
			}
			
			#title-block {
				margin-top: 24px;
				padding-left: 16px;
				border-left: 10px solid #d64;
				margin-bottom: 36px;
			}
			
			#title-block h1 {
				line-height: 36px;
				margin-bottom: 12px;
			}
			
			#title-block h4 {
				font-weight: 300;
			}
			
			#description-block p {
				font-size: small;
				color: #666;
				line-height: 2em;
				text-indent: 1em;
				text-align: justify;
			}
			
			#description-block .more,
			#description-block .less {
				color: #359;
			}
			
			#description-block .more:hover,
			#description-block .less:hover {
				cursor: pointer;
			}
			
			#description-block .detail {
				display: none;
			}
			
			#description-block .detail.show {
				display: block;
			}

			#notes-block {
			}
			
			#notes-block p,#notes-block a {
				font-size: small;
				color: #999;
				line-height: 1.8em;
			}
			
			#content-block {
				margin: 0 auto;
				margin-top: 24px;
				width: 100%;
				height: 1300px;
				overflow-x: scroll;
			}
			
			#countries-wrapper {
				padding: 0 100px 0 100px;
				min-width: 700px;
			}
			
			#countries {
				display: grid;
				grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
			}

			.country {
				width: 100%;
			}

			.country .flag {
				width: 100%;
				height: 100px;
				background-size: 70%;
				background-position: center center;
				background-repeat: no-repeat;
			}
			
			.country .cname {
				font-size: x-small;
				color: #999 !important;
				text-align: center;
				margin-bottom: -24px;
			}

			.country .disnumber {
				font-size: small;
				color: #888 !important;
				text-align: center;
				margin-bottom: 12px;
			}
			
			.country .avgperiod {
				font-size: small;
				color: #888 !important;
				text-align: center;
				margin-bottom: 24px;
			}
			
			.country .xs {
				font-size: x-small !important;
				color: #aaa !important;
				margin-bottom: 4px;
			}

			.country .timeline {
				height: 1000px;
			}

			.timeline .bone {
				position: absolute;
				width: 4px;
				height: 100%;
				left: calc((100% - 4px) / 2);
				border-radius: 20px;
				border: 1px solid #ccc;
				opacity: 0.3;
			}

			.timeline .election {
				position: absolute;
				left: calc((100% - 20px) / 2);
				margin-top: -5px;
				width: 20px;
				height: 20px;
				border-radius: 40px;
				border: 2px solid rgba(0,0,0,0.0);
				background-image: url('img/white_wall_hash.png');
			}

			.timeline .election .inner {
				top: 2px;
				left: 2px;
				width: 12px;
				height: 12px;
				border-radius: 40px;
				background-color: rgba(0,0,0,0.25);
			}

			.timeline .bone {
				background-color: #aaa;
			}

			.election.dissolution {border: 2px solid #D06A3B;}
			.election.censure			{border: 2px solid #208DC3;}
			.election.dissolution	.inner {background-color: #D06A3B;}
			.election.censure			.inner {background-color: #208DC3;}

			.election.hovered {                      
				margin-top: -13px;
				left: calc((100% - 36px) / 2);
				width: 36px;
				height: 36px;
				z-index: 10;
			}

			.election.hovered .inner {
				top: 4px;
				left: 4px;
				width: 24px;
				height: 24px;
			}

			#years {
				position: absolute;
				width: calc(100% + 80px);
				margin-left: -40px;
				padding-top: 160px;
				height: calc(100% - 100px);
			}
			
			#years .year {
				font-size: small;
			}
			
			#years .line {
				height: 1px;
				border-bottom: 1px dotted #ccc;
			}
			
			.tooltip {
				z-index: 10;
				position: absolute;
				font-size: small;
				width: 210px;
				height: 64px;
				margin-left: calc((210px * -0.5) + 16px);
				margin-top: 20px;
				background-color: #999;
				color: #fcfcfc !important;
				padding: 12px 24px;
				border-radius: 8px;
				border: none;
				box-shadow: 0 4px 8px rgba(0,0,0,0.2);
				text-align: center;
				line-height: 20px;
			}
			
			/* Thanks to: https://saruwakakun.com/html-css/basic/before-after#two8 */
			.tooltip:before {
				position: absolute;
				content: '';
				border-top: 12px solid #999;
				border-right: 12px solid transparent;
				border-left: 12px solid transparent;
				top: -9px;
				left: calc(50% - 12px);
				transform: rotateX(180deg);
			}
			
			#footer-block {
				height: 160px;
				padding-top: 60px;
				font-size: small;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="cover">
			<p>Loading...</p>
		</div>
		<div id="container">
			<div id="title-block">
				<h1>Elections and Dissolutions in The G7</h1>
				<h4>Timeline of elections and dissolutions in the G7 countries after WWII.</h4>
			</div>
			<div id="description-block" class="short">
				<p>This timeline is a visualization of national elections, espacially focusing on elections due to dissolution, of lower houses in G7 countries. <a class="more">Read more...</a></p>
				<p class="detail">On 22 October, all members of Japanese lower house (House of Representatives) will be elected. This is the 25th election after WW II, of which 24 times are elections due to dissolution of the house.</p>
				<p class="detail">In Japan, the lower house has shorter term of service and stronger political power, compared with the House of Councilors, and could be dissolved by no-confidence proposal to the Cabinet or <a href="http://japan.kantei.go.jp/constitution_and_government/frame_01.html" target="_blank">"the advice and approval of the Cabinet"</a>. The latter type of dissolution, substantially the decision of the Prime Minister, is <a href="https://www.nytimes.com/2017/09/25/world/asia/japan-abe-election.html" target="_blank">often criticized of cynical timing</a>.
				<p class="detail">So what happens if the timing of the elections were compared with other countries? Based on news articles and <a href="http://dl.ndl.go.jp/view/download/digidepo_10202206_po_0923.pdf?contentNo=1" target="_blank">Takazawa (2016), a paper that took a general view of systems of dissolution in G7 countries</a>, I plotted timings of national elections of lower houses of G7 countries (The U.S. does not have system of dissolution but is plotted the left side for your information).</p>
				<p class="detail">The larger number of dissolutions the country has experienced, the more right side it is placed. The colors are based on the reasons of the election: orange circles are elections due to dissolution decided by the head of the state such as the president or the prime minister, blue circles are dissolutions due to no-confidence proposal to the Cabinet, and gray small circles are elections due to expiration of term of office, including automatic dissolution after expiration. The number of dissolutions and the average period of term (not legal but practical) are shown under each national flag.</p>
				<p class="detail">The visualization shows that Japan has the largest number of dissolutions in G7, 24 times, and the second shortest practical term of service, following The US. While Canada and The UK follow Japan, the two countries changed their law in 2007 and 2011 respectively in order to restrict abusing dissolution. In the near future, Japan may follow the trend and the momentum of tightening the abusive dissolution may increase.<a class="less">Read less</a></p>
			</div>
			<div id="content-block">
				<div id="countries-wrapper">
					<div id="countries">
						<div id="years"></div>
					</div>
				</div>
			</div>
			<div id="notes-block">
				<p>- Data source: <a href="http://dl.ndl.go.jp/view/download/digidepo_10202206_po_0923.pdf?contentNo=1" target="_blank">Takazawa, M. 2016. 主要国議会の解散制度 (Japanese)</a>(The paper briefly describes dissolution systems in G7 countries), and other news articles.</p>
				<p>- Reasons of dissolutions are assessed according to the paper. "Non-confidence" includes approval of non-confidence bill and denial of confidence bill.</p>
				<p>- Japanese elections displayed are after The Constitution of Japan was enforced (1947). Similarly, Italian elections are after The Constitution of the Italian Republic (1948), and French are after Fifth Republic (1958).</p>
				<p>- While The U.S. lower house (House of Representatives) does not have system off dissolution and all members are elected every 2 years, I displayed The U.S. timeline for reference.</p>
			</div>
			<div id="footer-block">
				<p>Copyright &copy; 2017 Kazuki OGIWARA All rights reserved.</p>
			</div>
		</div>
		<script>
			var maxDate = 26571;	// 2017/10/01

			function map(value, low1, high1, low2, high2) {
				var ret = low2 + (high2 - low2) * (value - low1) / (high1 - low1);
				return ret;
			}
			
			function addYear(date, string){
				var y = map(date, 0, maxDate, 0, 98);
				var html =
					'<div class="year" style="top:' + y + '%">'
					+ '<div class="string">' + string + '</div>'
					+ '<div class="line"></div>'
				+	'</div>'
				;
				
				$("#years").append(html);
			}

			$(function(){

				$(document).on("click touchend", ".more", function(e) {
					e.preventDefault();
					$(this).hide("fast");
					$("#description-block").find(".detail").show("fast");
				});

				$(document).on("click touchend", ".less", function(e) {
					e.preventDefault();
					$("#description-block").find(".detail").hide("fast");
					$(".more").show("fast");
				});

				$(document).on("click touchend", function(e) {
					if (!$(e.target).closest(".election").length) {
						$(".hovered").removeClass("hovered");
						$(".tooltip").remove();
					}
				});

				$(document).on("mouseover touchend", ".election", function(){
					$(".hovered").removeClass("hovered");
					$(this).addClass("hovered");
					
					$(".tooltip").remove();
					
					var explanation = "Due to expiration";
					if ($(this).hasClass("dissolution")){
						explanation = "Due to dissolution";
						
						if ($(this).hasClass("censure")){
							explanation = "Due to non-confidence";
						}
					} else if ($(this).hasClass("expire")) {
						explanation = "Automatic dissolution";
					}

					var tooltip =
						'<div class="tooltip">'
						+	$(this).attr("date") + '<br>' + explanation
					+	'</div>'
					;
					
					$(this).append(tooltip);
				});

				$.getJSON("data.json", function(json){
					for (var i = 0; i < json.length; i++) {
						var country = json[i];
						var name   = country["name"];
						var disnum = country["num"];
						var period = country["period"];
							period = period.replace('年', ' <span class="xs">years</span><br>');
							period = period.replace('ヶ月', ' <span class="xs">months</span>');
						var data   = country["data"];
						
						var html =
							'<div class="country country' + i + '">'
							+	'<div class="cname">' + name + '</div>'
							+	'<div class="flag" style="background-image:url(img/flag_' + name + '.png)"></div>'
							+	'<div class="disnumber"><div class="xs">Dissolution:</div>' + disnum + ' <span class="xs">times</span></div>'
							+	'<div class="avgperiod"><div class="xs">Average:</div>' + period + '</div>'
							+	'<div class="timeline">'
								+	'<div class="bone"></div>'
							+	'</div>'
						+	'</div>'
						;

						$("#countries").append(html);

						for (var j = 0; j < data.length; j++) {
							var value = data[j];
							var y = map(value[0], 0, maxDate, 0, 100);
							
							var dclass = "";
							if (value[1] === 1)   {dclass += " dissolution";}
							if (value[3] === "C") {dclass += " censure";}
							if (value[3] === "E") {dclass += " expire";}
							
							var e =
								'<div class="election' + dclass + '" date="' + value[2] + '" style="top:' + y + '%;">'
								+	'<div class="inner">'
								+	'</div>'
							+	'</div>'
							;
							
							$(".timeline:last").append(e);
						}
					}
				});
				
				addYear(1826,  "1950");
				addYear(5478,  "1960");
				addYear(9131,  "1970");
				addYear(12783, "1980");
				addYear(16436, "1990");
				addYear(20088, "2000");
				addYear(23741, "2010");
			});
		</script>
	</body>
</html>
