function addCommas(a){return String(a).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function getPopupContent(a){return'<div class="name">JR '+a[0]+' station</div><div class="label">Average daily passengers:</div><div class="right">'+addCommas(a[1])+"</div>"}var kMap=L.map("map").setView([35.679,139.732],10),kMarkers=[];L.tileLayer("http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>',maxZoom:16,minZoom:6}).addTo(kMap),$.ajaxSetup({cache:!1}),$.getJSON("data.json",function(a){$.each(a,function(a,e){let t=e[1],n="k1";1e4<t&&(n="k2"),5e4<t&&(n="k3"),1e5<t&&(n="k4"),2e5<t&&(n="k5"),kMarkers[a]=L.marker([e[2],e[3]],{icon:L.divIcon({className:"location "+n})}).addTo(kMap).bindPopup(getPopupContent(e))})});