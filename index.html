<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="description" content="Data visualizations portfolio by Kazuki OGIWARA.">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<title>Kazuki OGIWARA: Portfolio</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				font-family: 'Roboto', sans-serif;
				letter-spacing: 1px;
			}

			html,body {
				width: 100%;
				height: 100%;
				background-image: url('index/img/ep_naturalwhite.png');
				background-color: rgba(255,255,255,1);
			}
			
			#cover {
				position: fixed;
				z-index: 100;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				background-color: rgb(255,255,255);
				text-align: center;
				color: rgba(0,0,0,0.8);
				vertical-align: middle;
				line-height: 100%;
			}
			
			#cover p {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				color: rgba(0,0,0,0.8);
				font-family: Helvetica;
				font-size: small;
			}

			#container{
				margin: 0 auto;
				width: 96%;
				max-width: 1080px;
			}
			
			.title {
				margin-top: 40px;
				margin-bottom: 80px;
				color: rgba(0,0,0,0.65);
			}
			
			.title h1 {
				margin-bottom: 20px;
			}
			
			#works {
				display: grid;
				grid-template-columns: 1fr 1fr 1fr;
			}
			
			.card {
				width: 90%;
				height: 200px;
				margin-bottom: 60px;
			}
			
			.card * {
			}
			
			.card-image{
				height: 200px;
				margin:0 auto;
				background-position: center center;
				background-size: cover;
				background-repeat: no-repeat;
				box-shadow: 0px 0px 1px rgba(255,255,255,0.5);
			}
			
			.card-title {
				margin-top: 10px;
				font-size: small;
				color: rgba(0,0,0,0.6);
			}
		</style>
	</head>
	<body>
		<div id="cover"><p>Loading...</p></div>
		<div id="container">
			<div class="title">
				<h1>Data Visualizations Portfolio</h1>
				<h3>Kazuki OGIWARA</h3>
			</div>
			<div id="works"></div>
		</div>
		<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
		<script>
			$(function(){
				var url = "index/data/viz.json";
				$.getJSON(url).done(function(json){
					
					var area = $("#works");

					for (var i = 0; i< json.length; i++) {
						var id					= json[i]["id"];
						var title				= json[i]["title"];
						
						area.append(
							  '<div class="card">'
								+ '<a class="viz-link" href="viz/' + id + '/"><div class="card-image" style="background-image:url(index/img/thumbnail-' + id + '.png)"></div></a>'
								+ '<div class="card-caption">'
									+ '<div class="card-title">' + title + '</div>'
								+ '</div>'
							+ '</div>');
					}
					
					$('#cover').fadeOut();

					// When a tag for viz was clicked
					$(document).on("click", "a.viz-link", function(e){
						e.preventDefault();
						var href = $(this).attr("href");
						$.when(
							$("#cover").fadeIn("fast")
						).done(function() {
							window.location.href = href;
						});
					});
				});
			});
		</script>
	</body>
</html>
