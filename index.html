<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="description" content="Data visualizations portfolio by Kazuki OGIWARA.">
		<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
		<link rel="stylesheet" href="assets/css/default.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<title>Kazuki OGIWARA: Portfolio</title>
		<style>
			* {
				font-size: 14px;
				transition: all 0.2s;
				font-weight: 400;
			}
			
			body {
				background-image: url('assets/img/ep_naturalwhite.png');
			}

			.container{
				margin: 0 auto;
				width: 100%;
				max-width: 960px;
			}
			
			#hero {
				z-index: 10;
				width: 100%;
				height: 90px;
				background-color: #238;
				box-shadow: 0 3px 6px 0 rgba(0,0,0,0.4);
			}
			
			#hero h1 {
				font-size: 24px;
				letter-spacing: 2px;
				font-weight: normal;
				color: rgba(255,255,255,0.96);
				padding: 12px 0 12px 8px;
			}

			#hero p {
				color: rgba(255,255,255,0.8);
				font-size: medium;
				padding: 0 0 0 8px;
			}

			#tabs {
				z-index: 5;
				width: 100%;
				background-color: #fefefe;
				box-shadow: 0 3px 6px 0 rgba(0,0,0,0.4);
			}
			
			#tabs .container {
				display: flex;
			}
			
			#tabs .tab {
				width: calc(100% / 2);
				height: 40px;
				line-height: 40px;
				text-align: center;
				border-bottom: solid 4px #ccc;
				color: #999;
			}
			
			#tabs .tab:hover {
				cursor: pointer;
			}
			
			#tabs .tab.selected {
				border-bottom: solid 4px #349;
				color: #349;
			}
			
			#content {
				margin-top: 20px;
				display: flex;
			}
			
			.tab-content {
				position: absolute;
				width: 100%;
				opacity: 0;
			}

			.tab-content.selected {
				opacity: 1;
			}
			
			#works   {
				left: 0;
				display: -webkit-flex;
				display: flex;   
				-webkit-flex-wrap: wrap;
				flex-wrap: wrap;
			}

			#profile {
				left: 100%;
			}
			
			.work {
				width: calc(100% - 16px);
				height: 100px;
				margin: 8px;
				display: -webkit-flex;
				display: flex;   
			}

			.work-image {
				width: 120px;
				height: 100%;
				margin-right: 8px;
				background-position: center center;
				background-size: cover;
				background-repeat: no-repeat;
				border-radius: 2px;
				background-color: #ccc;
			}

			.work-caption {
				width: calc(100% - 120px);
			}
			
			.work-title {
				font-size: 14px;
				line-height: 1.6em;
				margin-top: 2px;
				margin-bottom: 8px;
			}
			
			.work-description {
				font-size: 12px;
				color: #999;
			}
			
			.work:hover .work-image {
		    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
			}

			.work:hover .work-title {
		    color: rgba(20, 80, 160, 0.8);
			}

			/* Mobile (iPhone: 375px) */
			@media screen and (max-width: 400px) {
			}
			
			/* Tablet (iPad Air 2: 768px) */
			@media screen and (min-width: 401px) and (max-width: 800px) {
				.work {
					width: calc((100% / 2) - 24px);
					display: block;
					height: 200px;
					margin: 12px;
					margin-bottom: 32px;
				}
				
				.work .work-caption {
					width: 100%;
				}
				
				.work .work-image {
					width: 100%;
					height: calc(100% - 40px);
				}

				.work .work-title {
					font-size: 14px;
					width: 100%;
				}
			}
			
			/* PC */
			@media screen and (min-width: 801px) {
				.work {
					width: calc((100% / 3) - 32px);
					display: block;
					height: 200px;
					margin: 16px;
					margin-bottom: 40px;
				}
				
				.work .work-caption {
					width: 100%;
				}
				
				.work .work-image {
					width: 100%;
					height: calc(100% - 40px);
				}

				.work .work-title {
					font-size: 15px;
					width: 100%;
				}
			}
		</style>
	</head>
	<body>
		<div id="cover"><p>Loading...</p></div>
		<div id="hero">
			<div class="container">
				<h1>Kazuki OGIWARA</h1>
				<p>Data Visualization Engineer in Tokyo</p>
			</div>
		</div>
		<div id="tabs">
			<div class="container">
				<div class="tab ripple selected" for="works">Works</div>
				<div class="tab ripple" for="profile">Profile</div>
			</div>
		</div>
		<div id="content" class="container">
			<div class="tab-content selected" id="works"></div>
			<div class="tab-content" id="profile"></div>
		</div>
		<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
		<script>
			$(function(){

				var url = "assets/data/viz.json";
				$.getJSON(url).done(function(json){
					
					var area = $("#works");

					for (var i = 0; i< json.length; i++) {
						var id					= json[i]["id"];
						var title				= json[i]["title"];
						var description = "This is description. This is description. This is description.";
						area.append(
							  '<div class="work" href="viz/' + id + '/">'
								+	'<div class="work-image" style="background-image:url(assets/img/thumbnail-' + id + '.png)"></div>'
								+ '<div class="work-caption">'
									+ '<div class="work-title">' + title + '</div>'
								+ '</div>'
							+ '</div>');
					}
					
					$.ajax({
						url: "index_profile.html",
						cache: false,
						success: function(data) {
							$("#profile").html(data);
						}
					});

					// When a tag for viz was clicked
					$(document).on('click', ".work", function(e){
						e.preventDefault();
						var href = $(this).attr("href");
						$.when(
							$("#cover").fadeIn("fast")
						).done(function() {
							window.location.href = href;
						});
					});
					
					// When a tab was clicked
					$(document).on('touchstart click', ".tab", function(){
						
						var id = $(this).attr("for");
						$(".tab-content").removeClass("selected");
						$("#" + id).addClass("selected");
						$("#" + id).css("left", "0");
						
						if (id === "works") {
							$("#profile").css("left", "100%");
						}

						if (id === "profile") {
							$("#works").css("left", "-100%");
						}

						// selected class
						$(this).siblings(".tab").removeClass("selected");
						$(this).addClass("selected");
					});

					// Ripple effect
					$(document).on('touchstart click', '.ripple', function(e) {
						var x = e.offsetX;
						var y = e.offsetY;
						
						$(this).append('<span class="ripple_effect"></span>');
		
						var $effect = $(this).find('.ripple_effect');
						var w       = $effect.width();
						var h       = $effect.height();

						$effect.css({
							left: x - w / 2,
							top: y - h / 2
						});

						if (!$effect.hasClass('is-show')) {
							$effect.addClass('is-show');
							setTimeout(function() {
								$(".ripple_effect").remove();
							}, 750);
						}
						return false;
					});

					$('#cover').fadeOut();
				});
			});
		</script>
	</body>
</html>
